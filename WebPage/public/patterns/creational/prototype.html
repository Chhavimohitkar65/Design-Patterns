<!DOCTYPE html>
<html>
<head>
    <style>
        .container {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .definition {
            background-color: #f0f4f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .demo-area {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }

        .shape-container {
            border: 2px dashed #ccc;
            padding: 20px;
            flex: 1;
            min-height: 300px;
            position: relative;
        }

        .shape {
            position: absolute;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #45a049;
        }

        .code-block {
            background-color: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
        }

        .highlight {
            background-color: rgba(255, 255, 0, 0.2);
            padding: 2px 4px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="definition">
            <h2>Prototype Design Pattern</h2>
            <p>The Prototype pattern is a creational design pattern that allows you to create new objects by cloning an existing object, known as the prototype. This pattern is particularly useful when:</p>
            <ul>
                <li>The creation of a new object is expensive or complex</li>
                <li>You want to avoid creating a hierarchy of factory classes</li>
                <li>You need to create objects whose type is determined at runtime</li>
            </ul>
        </div>

        <div class="demo-area">
            <div class="shape-container" id="original">
                <h3>Original Shape (Prototype)</h3>
                <div class="shape" id="prototypeShape"></div>
            </div>
            <div class="shape-container" id="clones">
                <h3>Cloned Shapes</h3>
            </div>
        </div>

        <div class="controls">
            <button onclick="changeColor()">Change Color</button>
            <button onclick="changeSize()">Change Size</button>
            <button onclick="cloneShape()">Clone Shape</button>
            <button onclick="reset()">Reset</button>
        </div>

        <div class="code-block">
            <pre>
// Shape Prototype
class Shape {
    constructor(x, y, color, size) {
        this.x = x;
        this.y = y;
        this.color = color;
        this.size = size;
    }

    clone() {
        // Create a new instance with the same properties
        return new Shape(
            this.x,
            this.y,
            this.color,
            this.size
        );
    }
}

// Usage
const prototype = new Shape(100, 100, '#ff0000', 50);
const clone = prototype.clone();
            </pre>
        </div>
    </div>

    <script>
        class Shape {
            constructor(x, y, color, size) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.size = size;
                this.element = null;
            }

            createElement() {
                const element = document.createElement('div');
                element.className = 'shape';
                element.style.backgroundColor = this.color;
                element.style.width = this.size + 'px';
                element.style.height = this.size + 'px';
                element.style.left = this.x + 'px';
                element.style.top = this.y + 'px';
                this.element = element;
                return element;
            }

            clone() {
                return new Shape(
                    this.x + Math.random() * 50,
                    this.y + Math.random() * 50,
                    this.color,
                    this.size
                );
            }

            updateStyle() {
                if (this.element) {
                    this.element.style.backgroundColor = this.color;
                    this.element.style.width = this.size + 'px';
                    this.element.style.height = this.size + 'px';
                }
            }
        }

        const prototypeShape = new Shape(50, 100, '#ff4444', 50);
        const prototypeElement = prototypeShape.createElement();
        document.getElementById('original').appendChild(prototypeElement);

        let clones = [];
        let currentColor = '#ff4444';
        let currentSize = 50;

        function changeColor() {
            const colors = ['#ff4444', '#44ff44', '#4444ff', '#ffff44', '#ff44ff'];
            currentColor = colors[Math.floor(Math.random() * colors.length)];
            prototypeShape.color = currentColor;
            prototypeShape.updateStyle();
        }

        function changeSize() {
            currentSize = Math.max(30, Math.min(100, currentSize + (Math.random() > 0.5 ? 10 : -10)));
            prototypeShape.size = currentSize;
            prototypeShape.updateStyle();
        }

        function cloneShape() {
            const clone = prototypeShape.clone();
            const cloneElement = clone.createElement();
            document.getElementById('clones').appendChild(cloneElement);
            clones.push(clone);

            // Add animation effect
            cloneElement.style.opacity = '0';
            cloneElement.style.transform = 'scale(0.5)';
            setTimeout(() => {
                cloneElement.style.opacity = '1';
                cloneElement.style.transform = 'scale(1)';
            }, 50);
        }

        function reset() {
            clones.forEach(clone => clone.element.remove());
            clones = [];
            currentColor = '#ff4444';
            currentSize = 50;
            prototypeShape.color = currentColor;
            prototypeShape.size = currentSize;
            prototypeShape.updateStyle();
        }
    </script>
</body>
</html>